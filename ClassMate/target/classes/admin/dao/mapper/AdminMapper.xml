<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="admin.dao.face.AdminDao">
  
    <select id="userInfoCntAll" parameterType="int">
  	SELECT count(*) FROM user_info
  	WHERE user_secession = ${delCheckbox}
  	</select>
  	
  	<select id="selectUserAll" resultType="UserInfo" parameterType="Map">
  		SELECT * FROM (
    		SELECT rownum rnum, B.* FROM(
      			SELECT
				user_no, user_id, user_pw, user_gender, user_birthday, user_phone
				, user_name, user_email, main_address, sub_address, user_post, user_secession, user_date_created
		        FROM user_info
		        WHERE user_no > 0
		        	AND user_secession = 0
		        ORDER BY ${orderBy}
   			)B
		)WHERE rnum BETWEEN #{paging.startNo} AND #{paging.endNo}
  	</select>
  	
  	<select id="selectDelUserAll" resultType="UserInfo" parameterType="Map">
  		SELECT * FROM (
    		SELECT rownum rnum, B.* FROM(
      			SELECT
				user_no, user_id, user_pw, user_gender, user_birthday, user_phone
				, user_name, user_email, main_address, sub_address, user_post, user_secession, user_date_created
		        FROM user_info
		        WHERE user_no > 0
		        	AND user_secession = 1
		        ORDER BY ${orderBy}
   			)B
		)WHERE rnum BETWEEN #{paging.startNo} AND #{paging.endNo}
  	</select>
  	
  	<select id="selectUser" resultType="UserInfo" parameterType="UserInfo">
  		SELECT
			user_no, user_id, user_pw, user_gender, user_birthday, user_phone
			, user_name, user_email, main_address, sub_address, user_post, user_secession, user_date_created
        FROM user_info
  		WHERE user_no = ${userNo} 
  	</select>
  	
  	<update id="updateUser" parameterType="UserInfo">
  		UPDATE user_info
  		SET user_gender = #{userGender} 
  			, user_birthday = #{userBirthday}
  			, user_phone = #{userPhone}
  			, user_name = #{userName}
  			, user_post = #{userPost}
  			, main_address = #{mainAddress}
  			, sub_address = #{subAddress}
  		WHERE user_no = ${userNo}
  	</update>
  	
  	<update id="setSecessionUser" parameterType="int">
  		UPDATE user_info
  		set user_secession = 1
  		WHERE user_no = ${userNo}
  	</update>
  	
  	<select id="announceBoardCntAll" resultType="int">
  	SELECT count(*) FROM announce_board
  	</select>
  	
  	<select id="eventBoardCntAll" resultType="int">
  	SELECT count(*) FROM announce_board
  	</select>
  	
  	<select id="selectEventBoardAll" resultType="EventBoard" parameterType="Map">
  		SELECT * FROM (
    		SELECT rownum rnum, B.* FROM(
      			SELECT
				event_no, user_no, event_head, event_date, event_hit, event_name, event_content, event_exist, head_img
				FROM event_board
		        ORDER BY event_no DESC
   			)B
		)WHERE rnum BETWEEN #{eventPaging.startNo} AND #{eventPaging.endNo}
  	</select>
  	
  	<select id="selectAnnounceBoardAll" resultType="AnnounceBoard" parameterType="Map">
  		SELECT * FROM (
    		SELECT rownum rnum, B.* FROM(
      			SELECT
				announce_no, user_no, announce_head, announce_date, announce_hit, announce_name, announce_content, announce_exist
				FROM announce_board
		        ORDER BY announce_no DESC
   			)B
		)WHERE rnum BETWEEN #{announcePaging.startNo} AND #{announcePaging.endNo}
  	</select>
  	
  	<select id="selectAnnounceNo" resultType="AnnounceBoard" parameterType="AnnounceBoard">
  		SELECT
			announce_no, user_no, announce_head, announce_date, announce_hit, announce_name, announce_content, announce_exist
        FROM Announce_board
  		WHERE announce_no = ${announceNo}
  	</select>
  	
  	
  	
  </mapper>